<html>
  <head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.slim.min.js"></script>

    <script type = "text/javascript">
         function CallHello(msg) {
            if ("WebSocket" in window) {
               var ws = new WebSocket("ws://localhost:50000/service/hello");

               ws.onopen = function() {
                  ws.send(msg);
               };

               ws.onmessage = function (evt) {
                   var received_msg = evt.data;
		   $("#reply").text(received_msg);
               };

               ws.onclose = function() {
		   // Ignore.
               };
            } else {
               // The browser doesn't support WebSocket
               alert("WebSocket NOT supported by your Browser!");
	    }
         }
      </script>
    </head>
  <body>

    <h1>Hello, world!</h1>
    <form action="javascript:CallHello($('#name').val())">
      <input type="text" id="name" name="name" value="world"/>
      <input type="submit" value="Send"/>
    </form>

    <div id="reply">
    </div>
  </body>
</html>
