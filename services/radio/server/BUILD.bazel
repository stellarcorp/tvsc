cc_binary(
    name = "tvsc-radio-service",
    srcs = [
        "radio_server.cc",
    ],
    data = [
        "//services/radio/server/modules:dummy_radio",
        "//services/radio/server/modules:soapy_rtlsdr",
    ],
    linkopts = ["-rdynamic"],
    visibility = ["//visibility:public"],
    deps = [
        ":soapy",
        "//services/configuration",
        "//services/radio/common",
        "//third_party/gflags",
        "//third_party/glog",
        "//third_party/grpc",
        "//third_party/soapy_remote:server",
    ],
)

cc_library(
    name = "soapy",
    srcs = [
        "soapy.cc",
    ],
    hdrs = [
        "soapy.h",
    ],
    deps = [
        "//third_party/gflags",
        "//third_party/glog",
        "//third_party/soapy_remote:server",
        "//third_party/soapysdr",
    ],
)

cc_test(
    name = "module_load_test",
    srcs = [
        "module_load_test.cc",
    ],
    data = [
        "//services/radio/server/modules:dummy_radio",
        "//services/radio/server/modules:soapy_rtlsdr",
    ],
    deps = [
        ":soapy",
        "//third_party/gflags",
        "//third_party/glog",
        "//third_party/gtest",
        "//third_party/soapysdr",
    ],
)

cc_binary(
    name = "list-radio-devices",
    srcs = [
        "list_devices.cc",
    ],
    data = [
        "//services/radio/server/modules:dummy_radio",
        "//services/radio/server/modules:soapy_rtlsdr",
    ],
    linkopts = [
        "-rdynamic",
    ],
    visibility = ["//visibility:public"],
    deps = [
        ":soapy",
        "//third_party/gflags",
        "//third_party/glog",
        "//third_party/soapysdr",
    ],
)
