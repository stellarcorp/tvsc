licenses(["notice"])

load("@rules_pkg//pkg:mappings.bzl", "pkg_attributes", "pkg_files")

cc_library(
    name = "host_soapy_sdr",
    linkopts = [
        "-lSoapySDR",
    ],
)

cc_library(
    name = "soapy",
    visibility = ["//visibility:public"],
    deps = select({
        "//platforms:aarch64_linux_build": [
            "@org_debian_ftp_libsoapysdr_dev//:dev",
        ],
        "//platforms:x86_64_linux_build": [
            ":host_soapy_sdr",
        ],
        # TODO(james): Add other platform selectors as appropriate.
        "//conditions:default": ["@platforms//:incompatible"],
    }),
)
